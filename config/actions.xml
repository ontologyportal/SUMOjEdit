<!DOCTYPE ACTIONS SYSTEM "actions.dtd">
<ACTIONS>
    <ACTION NAME="sumojedit.show-stats">
        <CODE>
            jEdit.getPlugin("com.articulate.sigma.jedit.SUMOjEditPlugin").sje.showStats();
        </CODE>
    </ACTION>
    <ACTION NAME="sumojedit.check-errors">
        <CODE>
            jEdit.getPlugin("com.articulate.sigma.jedit.SUMOjEditPlugin").sje.checkErrors();
        </CODE>
    </ACTION>
    <ACTION NAME="sumojedit.format-select">
        <CODE>
            jEdit.getPlugin("com.articulate.sigma.jedit.SUMOjEditPlugin").sje.formatSelect();
        </CODE>
    </ACTION>
    <ACTION NAME="sumojedit.goto-defn">
        <CODE>
            jEdit.getPlugin("com.articulate.sigma.jedit.SUMOjEditPlugin").sje.gotoDefn();
        </CODE>
    </ACTION>
    <ACTION NAME="sumojedit.browse-term">
        <CODE>
            jEdit.getPlugin("com.articulate.sigma.jedit.SUMOjEditPlugin").sje.browseTerm();
        </CODE>
    </ACTION>
    <ACTION NAME="sumojedit.chooseE">
        <CODE>
            jEdit.getPlugin("com.articulate.sigma.jedit.SUMOjEditPlugin").sje.chooseE();
        </CODE>
    </ACTION>
    <ACTION NAME="sumojedit.chooseVamp">
        <CODE>
            jEdit.getPlugin("com.articulate.sigma.jedit.SUMOjEditPlugin").sje.chooseVamp();
        </CODE>
    </ACTION>
    <ACTION NAME="sumojedit.setFOF">
        <CODE>
            jEdit.getPlugin("com.articulate.sigma.jedit.SUMOjEditPlugin").sje.setFOF();
        </CODE>
    </ACTION>
    <ACTION NAME="sumojedit.setTFF">
        <CODE>
            jEdit.getPlugin("com.articulate.sigma.jedit.SUMOjEditPlugin").sje.setTFF();
        </CODE>
    </ACTION>
    <ACTION NAME="sumojedit.query-exp">
        <CODE>
            jEdit.getPlugin("com.articulate.sigma.jedit.SUMOjEditPlugin").sje.queryExp();
        </CODE>
    </ACTION>
    <ACTION NAME="sumojedit.to-tptp">
        <CODE>
            jEdit.getPlugin("com.articulate.sigma.jedit.SUMOjEditPlugin").sje.toTPTP();
        </CODE>
    </ACTION>
    <ACTION NAME="sumojedit.from-tptp">
        <CODE>
            jEdit.getPlugin("com.articulate.sigma.jedit.SUMOjEditPlugin").sje.fromTPTP();
        </CODE>
    </ACTION>

    <!-- ===== AutoComplete menu item with AC-mode + robust fallback ===== -->
    <ACTION NAME="sumojedit.autoComplete">
        <CODE>
            String mode = jEdit.getProperty("sumojedit.ac.mode","BOTH");
            if ("DROPDOWN_ONLY".equals(mode) || "BOTH".equals(mode)) {
                boolean invoked = false;
                try {
                    // Try the plugin's drop-down first
                    jEdit.getPlugin("com.articulate.sigma.jedit.SUMOjEditPlugin").sje.autoComplete();
                    invoked = true;
                } catch (Throwable t) {
                    // ignore and fall back
                }
                try {
                    // Always fall back to jEdit's built-in drop-down (guaranteed popup)
                    jEdit.getActionContext().invokeAction(view, "complete-word");
                    invoked = true;
                } catch (Throwable t2) {
                    // If even built-in fails, give a tiny hint (comment out if you prefer silence)
                    org.gjt.sp.jedit.Macros.message(view, "AutoComplete unavailable.");
                }
            } else {
                // AC drop-down disabled by mode; do nothing.
            }
        </CODE>
    </ACTION>

    <!-- ===== New: Autocomplete mode toggles ===== -->
    <ACTION NAME="sumojedit.ac.mode.off">
        <CODE>
            jEdit.setProperty("sumojedit.ac.mode","OFF");
            org.gjt.sp.jedit.Macros.message(view, "Autocomplete mode: Off");
        </CODE>
        <IS_SELECTED>
            return "OFF".equals(jEdit.getProperty("sumojedit.ac.mode","BOTH"));
        </IS_SELECTED>
    </ACTION>

    <ACTION NAME="sumojedit.ac.mode.ghost">
        <CODE>
            jEdit.setProperty("sumojedit.ac.mode","GHOST_ONLY");
            org.gjt.sp.jedit.Macros.message(view, "Autocomplete mode: Ghost-text only");
        </CODE>
        <IS_SELECTED>
            return "GHOST_ONLY".equals(jEdit.getProperty("sumojedit.ac.mode","BOTH"));
        </IS_SELECTED>
    </ACTION>

    <ACTION NAME="sumojedit.ac.mode.dropdown">
        <CODE>
            jEdit.setProperty("sumojedit.ac.mode","DROPDOWN_ONLY");
            org.gjt.sp.jedit.Macros.message(view, "Autocomplete mode: Drop-down only");
        </CODE>
        <IS_SELECTED>
            return "DROPDOWN_ONLY".equals(jEdit.getProperty("sumojedit.ac.mode","BOTH"));
        </IS_SELECTED>
    </ACTION>

    <ACTION NAME="sumojedit.ac.mode.both">
        <CODE>
            jEdit.setProperty("sumojedit.ac.mode","BOTH");
            org.gjt.sp.jedit.Macros.message(view, "Autocomplete mode: Both");
        </CODE>
        <IS_SELECTED>
            return "BOTH".equals(jEdit.getProperty("sumojedit.ac.mode","BOTH"));
        </IS_SELECTED>
    </ACTION>
</ACTIONS>